# restoreState

## Обзор {#overview}

Команда для восстановления данных (cookies, local and session storages) из файла или объекта.

## Использование {#usage}

Вы можете восстановить состояние браузера из файла (с помощью параметра `path`) или непосредственно из объекта (с помощью параметра `data`).

**Важно:** Если вы указали оба параметра `path` и `data`, приоритет будет у файла, указанного в `path`.

При необходимости вы можете указать, какие типы данных восстановить, используя параметры `cookies`, `localStorage` и `sessionStorage`. Это позволяет восстановить только те данные, которые вам нужны.

Данные для восстановления состояния можно получить с помощью команды [saveState](../saveState).

## Параметры команды {#parameters}

<table>
    <thead>
    <tr><td>**Имя**</td><td>**Тип**</td><td>**Описание**</td></tr>
    </thead>
    <tbody>
    <tr><td>path</td><td>`string`</td><td>Путь к файлу с данными.</td></tr>
    <tr><td>data</td><td>`SaveStateData`</td><td>Объект с данными.</td></tr>
    <tr><td>cookies</td><td>`boolean`</td><td>Включить восстановление кук (true по умолчанию).</td></tr>
    <tr><td>localStorage</td><td>`boolean`</td><td>Включить восстановление localStorage (true по умолчанию).</td></tr>
    <tr><td>sessionStorage</td><td>`boolean`</td><td>Включить восстановление sessionStorage (true по умолчанию).</td></tr>
    <tr><td>cookieFilter</td><td>`(cookie: Cookie) => boolean`</td><td>Функция для фильтрации кук, принимает объект куки и возвращает boolean.</td></tr>

    </tbody>

</table>

```typescript
await browser.restoreState({
    path: "./stateDump.json",
    data: stateDump,
    cookies: true,
    localStorage: true,
    sessionStorage: true,
});
```

## Примеры использования {#examples}

Восстановление данных из файла.

```typescript
it("test", async ({ browser }) => {
    await browser.url("https://github.com/gemini-testing/testplane");

    await browser.restoreState({
        path: "./stateDump.json",
        cookieFilter: ({ domain }) => domain === ".example.com",
    });

    // Reload page for see auth result.
    await browser.refresh();
});
```

## Связанные команды {#related}

-   [saveState](../saveState)
