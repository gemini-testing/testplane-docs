import Admonition from "@theme/Admonition";

# saveState

## Обзор {#overview}

Команда для сохранения состояния страницы (cookies, local и session storages).

<Admonition type="warning">
    Если вы используете `webdriver` automation protocol вы должны установить `webSocketUrl: true` в `desiredCapabilities` для браузера в конфиге.
    Для `devtools` protocol не нужно дополнительных настроек.
</Admonition>

## Использование {#usage}

Команда вернёт объект включающий cookie, localStorage и sessionStorage.
Используя параметры вы можете выключить сохранение отдельных данных.
Так же вы можете указать параметр `path` и получить файл с данными.
После сохранения вы можете использовать результат в команде [restoreState](../restoreState).

```typescript
import type { SaveStateData } from "testplane";

const stateDump: SaveStateData = await browser.saveState({
    path: './stateDump.json',
    cookies: true,
    localStorage: true,
    sessionStorage: true,
});
```

## Параметры команды {#parameters}

<table>
    <thead>
    <tr><td>**Имя**</td><td>**Тип**</td><td>**Описание**</td></tr>
    </thead>
    <tbody>
    <tr><td>path</td><td>String</td><td>Путь где будет сохранён файл с данными.</td></tr>
    <tr><td>cookies</td><td>Boolean</td><td>Включить сохранение кук (true по умолчанию).</td></tr>
    <tr><td>localStorage</td><td>Boolean</td><td>Включить сохранение localStorage (true по умолчанию).</td></tr>
    <tr><td>sessionStorage</td><td>Boolean</td><td>Включить сохранение sessionStorage (true по умолчанию).</td></tr>

    </tbody>
</table>


## Примеры использования {#examples}

Сохранение данных в файл.
```typescript
it("test", async ({ browser }) => {
    await browser.url("https://github.com/gemini-testing/testplane");

    await browser.saveState({
        path: './stateDump.json',
    });
});
```

## Связанные команды {#related}

-   [restoreState](../restoreState)
