import Admonition from "@theme/Admonition";

# Сравнение Testplane с Playwright

И **Testplane**, и **Playwright** — это решения для end-to-end тестирования, но они имеют разные подходы и возможности. В этой статье мы проведём детальное сравнение этих инструментов, чтобы помочь вам сделать правильный выбор.

## Краткий обзор инструментов

**Testplane** — это инструмент для автоматизации тестирования веб-приложений, разработанный командой Яндекса. Он активно используется как в крупных, так и в небольших проектах компании и поддерживает широкий спектр браузеров и устройств.

**Playwright** — инструмент от Microsoft, который быстро завоевал популярность благодаря своей простоте использования и современному подходу к автоматизации.

## Ключевые различия

### Поддержка браузеров и мобильных устройств

<Admonition type="tip">
    Testplane поддерживает как десктопные браузеры, так и мобильные устройства
</Admonition>

Одним из ключевых преимуществ Testplane является его универсальность в работе с десктопными браузерами и мобильными устройствами. В отличие от Playwright, который фокусируется на современных десктопных браузерах последних версий, Testplane предоставляет полноценную поддержку как старых, так и новых версий браузеров.
Это важно для компаний, которые работают с пользователями, использующими устаревшие браузеры. Полное сравнение двух подходов можно посмотреть в таблице ниже:

<table>
    <thead>
        <tr>
            <td>**Критерий**</td>
            <td>**Testplane**</td>
            <td>**Playwright**</td>
            <td>**Почему это важно**</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Источник браузеров</td>
            <td>Оригинальные бинарники от браузерных вендоров</td>
            <td>Кастомные сборки</td>
            <td>Максимальная приближённость к реальным устройствам</td>
        </tr>
        <tr>
            <td>Версии браузеров</td>
            <td>Любые — от legacy до новейших</td>
            <td>Версия браузера привязана к версии Playwright</td>
            <td>
                Одновременное покрытие пользователей как на новых, так и на устаревших браузерах
            </td>
        </tr>
        <tr>
            <td>Мобильные устройства</td>
            <td>Android и iOS: браузеры + нативные приложения</td>
            <td>Нет</td>
            <td>Единый стек для десктопа и мобильных устройств</td>
        </tr>
        <tr>
            <td>Удаленный грид</td>
            <td>Selenium Grid/Selenoid/BrowserStack/SauceLabs (любой удаленный грид)</td>
            <td>
                Официально — платный Microsoft Playwright Testing; Удаленный грид — с помощью хака,
                без гарантий
            </td>
            <td>Масштабируемость и использование своего грида</td>
        </tr>
        <tr>
            <td>Протоколы</td>
            <td>CDP; WebDriver (W3C); WebDriver BiDi</td>
            <td>Собственный кастомный протокол; CDP (Chromium); WebDriver — нет</td>
            <td>Совместимость с браузерами и гибкость интеграций</td>
        </tr>
    </tbody>
</table>

### Визуальное тестирование

<Admonition type="tip">
    Testplane предлагает продвинутые возможности для визуального тестирования
</Admonition>

В области визуального (скриншотного) тестирования Testplane демонстрирует явное превосходство над Playwright.
Под капотом инструмент использует собственную библиотеку [looks-same][looks-same] для сравнения скриншотов, которая [быстрее][looks-same-benchmarks] и точнее текущих конкурентов:

-   Ожидание загрузки элементов перед скриншотом, чтобы исключить нестабильность в тесте;
-   Отключение анимации на странице;
-   Гибкая настройка чувствительности скриншотного тестирования — [tolerance][tolerance], [anti-aliasing tolerance][anti-aliasing-tolerance], игнорирование фиксированного количества пикселей;
-   Используется 3 уровня сравнения для оптимизации скорости;
-   Разнообразные [виды визуализации различий между скриншотами][report-visual-testing] для удобной отладки, в т.ч. и подсветка мелких диффов;
-   Игнорирование элементов на скриншоте при необходимости.

Testplane предоставляет удобный [интерфейс][reporter] для массового принятия скриншотов, что ускоряет процесс обновления эталонных изображений.
Также, если в проекте пользователя настроен [Storybook][storybook], то Testplane предоставляет [автоматическую генерацию скриншотных тестов][storybook-autotests], что позволяет быстро покрыть визуальными проверками все компоненты проекта **без написания кода**.

Playwright предлагает лишь базовую поддержку скриншотного тестирования с ограниченными возможностями и менее удобным интерфейсом для работы со скриншотами. Это делает его менее подходящим для проектов, где важно визуальное тестирование.

### Отчет для работы с тестами

<Admonition type="tip">
    У Testplane есть мощный UI для работы с тестами в самых различных сценариях
</Admonition>

Testplane имеет графический интерфейс, который не просто показывает результаты выполнения ваших тестов, но и предоставляет широкие возможности для работы с ними.

Этот отчет прекрасно подходит как для локальной работы, так и для использования в CI. Он предлагает единый интерфейс для выполнения различных задач:

-   Запуск тестов непосредственно из UI;
-   Отладка с помощью [Time Travel][time-travel] (пошагового воспроизведения тестов);
-   Анализ производительности тестов;
-   Обновление эталонных изображений при скриншотном тестировании;
-   Объединение нескольких отчетов в один;
-   Повторное использование результатов из CI.

Особенно важно, что отчёт Testplane способен эффективно работать с тысячами тестов, не теряя производительности. А система плагинов позволяет кастомизировать отчёты под специфические потребности команды.

Со всеми возможностями отчета можно ознакомиться в разделе [UI][reporter] сайта https://testplane.io.

### Взаимодействие с ИИ

<Admonition type="tip">
    Testplane MPC помогает ИИ-агентам писать стабильные новые тесты и чинить существующие
</Admonition>

[Testplane MCP][testplane-mcp] — это инструмент, который позволяет ИИ-агентам погрузиться в контекст того, что происходит в браузере, выполнять действия и создавать или чинить тесты, основываясь на реальном состоянии страницы.
С помощью Testplane MCP пользователи могут не только создавать рабочие и стабильные тесты, но и быстро исправлять уже существующие. Testplane MPC позволяет подключиться к браузеру в ходе выполнения вашего теста, чтобы отладить или изменить его. Это значительно сокращает время, затрачиваемое на исправление нестабильных тестов.
Кроме того, Testplane MCP предоставляет возможность запускать браузер в режиме эмуляции мобильных устройств. Например, можно сказать "Открой страницу example.com с помощью Testplane MCP на iPhone 15" или указать явно какой User Agent нужно указать при создании браузерной сессии.

### Расширяемость и интеграции

<Admonition type="tip">Testplane предоставляет больше возможностей для кастомизации</Admonition>

Архитектура Testplane построена с учётом потребностей в кастомизации и интеграции. Богатая [событийная модель](/docs/v8/reference/testplane-events) предоставляет множество точек расширения, позволяя разработчикам внедрять собственную логику на любом этапе выполнения тестов. Это особенно важно для проектов, где требуется интеграция с внутренними системами мониторинга, отчётности и управления качеством.
Также Testplane предоставляет JS API, которое позволяет создавать собственные раннеры, адаптированные под специфические потребности проекта.

Playwright, несмотря на свою популярность, предлагает меньше точек расширения и требует самостоятельной разработки большинства интеграций. Это увеличивает время на внедрение и поддержку инструмента в корпоративной среде.

### Масштабирование и производительность

<Admonition type="tip">Testplane проверен на крупных проектах с миллионами тестов</Admonition>

Архитектура Testplane изначально проектировалась для работы с большими объёмами тестов, что обеспечивает стабильную работу даже при значительном росте тестового покрытия. Это особенно важно для долгосрочных проектов, где количество тестов постоянно увеличивается.
Поддержка удалённого грида браузеров (например, BrowserStack, SauceLabs и т.д.) позволяет эффективно распределять выполнение тестов по множеству машин, обеспечивая быстрое выполнение даже очень больших тестовых наборов.
Также Testplane позволяет масштабировать запуски за счет шардирования, запуская тесты на разных машинах. При этом, в результате пользователю будет предоставлен единый отчет с результатами пройденных тестов.

Playwright также имеет возможности для масштабирования в виде шардирования из коробки. Масштабирование за счет удаленного грида предоставляется только в виде платного сервиса [Microsoft Playwright Testing][mpt].

### Обновления и стабильность

Testplane обеспечивает высокую стабильность благодаря продуманному подходу к управлению зависимостями. Обновления инструмента полностью отвязаны от обновлений браузеров, что позволяет командам контролировать процесс миграции и избегать неожиданных поломок в CI/CD пайплайнах. Использование стабильных версий браузеров минимизирует количество проблем с переснятием скриншотов, что особенно важно для проектов с большим количеством визуальных тестов.
Такой подход обеспечивает предсказуемость поведения тестов и снижает затраты на поддержку инфраструктуры тестирования. Команды могут планировать обновления браузеров независимо от обновлений самого инструмента тестирования, что даёт больше гибкости в управлении техническим долгом.

Playwright же связывает обновления инструмента с обновлениями браузеров, что может приводить к неожиданным изменениям в поведении тестов. Это создаёт дополнительную нагрузку на команды разработки, которым приходится чаще пересматривать и обновлять скриншоты, особенно в проектах с активной разработкой интерфейса.

## Рекомендации по выбору

### Выбирайте Playwright, если:

✅ Достаточно тестирования только в самых последних десктопных браузерах\
✅ Уверены, что не потребуется поддержка старых версий браузеров\
✅ Не нужно визуальное тестирование

### Выбирайте Testplane, если:

✅ Важно визуальное тестирование с удобным отчётом\
✅ В будущем потребуется масштабирование\
✅ Важна кастомизация под специфические нужды\
✅ Необходимо тестирование в широком спектре десктопных браузеров и мобильных устройств\
✅ Требуется тестирование нативных приложений Android и iOS

[anti-aliasing-tolerance]: https://testplane.io/docs/v8/config/browsers/#antialiasing_tolerance
[looks-same]: https://github.com/gemini-testing/looks-same
[looks-same-benchmarks]: https://github.com/gemini-testing/looks-same/blob/master/benchmark/results.md
[mpt]: https://learn.microsoft.com/en-us/azure/playwright-testing/
[report-visual-testing]: https://testplane.io/docs/v8/html-reporter/overview/#superb-visual-testing-capabilities
[reporter]: https://testplane.io/docs/v8/html-reporter/overview/
[storybook]: https://storybook.js.org
[storybook-autotests]: https://testplane.io/docs/v8/visual-testing/with-storybook/
[testplane-mcp]: https://testplane.io/ru/docs/v8/testplane-mcp/
[tolerance]: https://testplane.io/docs/v8/config/browsers/#tolerance
[time-travel]: https://testplane.io/ru/docs/v8/guides/time-travel/
