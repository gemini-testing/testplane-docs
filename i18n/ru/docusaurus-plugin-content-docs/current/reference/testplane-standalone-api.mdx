# Standalone API

## Обзор

Standalone API позволяет напрямую из вашего кода запустить новый экземпляр браузера или подключиться к уже работающему, а затем выполнить в нём необходимые действия.

Внимание: на данный момент Standalone API находится в стадии разработки и его интерфейс может меняться. Пожалуйста, учитывайте это при использовании.

## Использование

### Запуск браузера

Запуск браузера с необходимыми параметрами.

```typescript
import { launchBrowser } from "testplane/unstable";

// Запуск браузера с необходимыми параметрами
const browser = await launchBrowser({
    desiredCapabilities: {
        browserName: "chrome",
    },
    headless: false,
});

// Переход по адресу и выполнение нужных действий
await browser.url("https://example.com");

// !Важно: завершить сессию, чтобы избежать утечки ресурсов (зависших процессов)
await browser.deleteSession();
```

Подробнее о [launchBrowser](https://github.com/gemini-testing/testplane/blob/master/src/browser/standalone/launchBrowser.ts)

### Подключение к браузеру

Подключение к уже запущенному браузеру с помощью параметров сессии.
Получить параметры сессии можно, запустив testplane с опцией `--keep-browser`, смотрите [подробнее](../reference/cli.mdx#testplane-keep-browser)

```typescript
import { attachToBrowser } from "testplane/unstable";

// Attach to existing browser with session params
const browser = await attachToBrowser({
    sessionId: "f1bd2b2bc6563f82d2120c31f4b92c03",
    sessionCaps: {
        browserName: "chrome",
        browserVersion: "137.0.7151.119",
        setWindowRect: true,
    },
    sessionOpts: {
        protocol: "http",
        hostname: "127.0.0.1",
        port: 62536,
        path: "/",
        strictSSL: true,
    },
    driverPid: 34985, // Очень важный параметр, нужен что бы завершить оставшиеся процессы
});

// Переход по адресу и выполнение нужных действий
await browser.url("https://example.com");

// !Важно: завершить сессию, чтобы избежать утечки ресурсов (зависших процессов)
await browser.deleteSession();
```

Подробнее о [attachToBrowser](https://github.com/gemini-testing/testplane/blob/master/src/browser/standalone/attachToBrowser.ts)
