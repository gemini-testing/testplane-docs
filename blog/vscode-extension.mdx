---
title: Расширение для VS Code
slug: vscode-extension
hide_table_of_contents: false
date: 2024-09-26T19:00
---

import Admonition from "@theme/Admonition";
import runTestsFromSidebarVideoUrl from "/video/blog/vscode-extension/run-tests-from-sidebar.mp4";
import runTestsFromEditorVideoUrl from "/video/blog/vscode-extension/run-tests-from-editor.mp4";

Для Testplane реализовали расширение для [VS Code][vscode], с помощью которого можно настраивать Testplane с нуля, запускать тесты и удобно работать с <a href="/ru/docs/v8/command-line/#testplane-repl">REPL режимом</a>.

<!-- truncate -->

### Установка

Установите расширение со страницы [VS Code Marketplace][vscode-testplane-marketplace] или на вкладке расширений в VS Code IDE.

![Расширение в VS Code IDE](/img/blog/vscode-extension/testplane-in-extensions-panel.png)

После установки откройте VS Code в пустом проекте и в панеле управления введите:

```
Install Testplane
```

![Установка Testplane](/img/blog/vscode-extension/testplane-install.png)

### Запуск тестов

#### Из сайдбара в панеле для тестирования

Панель для тестирования можно открыть, кликнув на значок тестирования в панели действий.

![Открытие панели для тестирования](/img/blog/vscode-extension/testing-sidebar.png)

В левой части экрана отображается сайдбар с деревом всех прочитанных тестов. В дереве сверху вниз отображаются:

-   название директории с тестами (`testplane-tests`);
-   название файла теста (`example.testplane.ts`);
-   название сьюта (`test`). В примере используется `describe` из [Mocha BDD интерфейса][mocha-bdd-interface];
-   название теста (`example`). В примере использует `it` из [Mocha BDD интерфейса][mocha-bdd-interface];
-   название браузера в котором тест будет запущен (`chrome`).

У каждого из элементов дерева отображается кнопка `Run Test`. Если нажать на `Run Test` у элемента:

-   директории, файла или сьюта, то запустятся все дочерние тесты во всех браузерах;
-   теста, то запустится выбранный тест во всех браузерах;
-   браузера, то запустится один тест в одном браузере.

Пример запуска тестов из сайдбара:

<video src={runTestsFromSidebarVideoUrl} width="100%" controls="controls">
    Тег video не поддерживается вашим браузером.
    <a href="video/blog/vscode-extension/run-tests-from-sidebar.mp4">Скачайте видео</a>.
</video>

Также можно выполнить запуск всех тестов с помощью кнопки `Run Tests`.

![Запуск всех тестов](/img/blog/vscode-extension/run-all-tests-from-sidebar.png)

#### Из текстового редактора

Если в текстовом редакторе открыть Testplane тест, то рядом с каждым сьютом (`describe`) и тестом (`it`) будет отображаться зеленая кнопка play для их запуска. Если нажать левой кнопкой мыши, то запустится тест во всех браузерах, и после его выполнения отобразится результат в виде иконки статуса прохождения теста.
Если нажать на кнопку play правой клавишей мыши, то можно запустить тест в одном из браузеров.

Пример запуска тестов из текстового редактора:

<video src={runTestsFromEditorVideoUrl} width="100%" controls="controls">
    Тег video не поддерживается вашим браузером.
    <a href="video/blog/vscode-extension/run-tests-from-editor.mp4">Скачайте видео</a>.
</video>

#### С настройкой `devtools`

В сайдбаре в панели для тестирования так же отображается секция с названием Testplane. В ней можно управлять настройками в рантайме. При клике в чекбокс `Enable devtools` и последующем запуске тестов браузеры будут подниматься с использованием CDP протокола (вне зависимости от того что указано в конфиге). Подробнее про этот режим можно прочитать <a href="/ru/docs/v8/guides/how-to-use-cdp/">тут</a>.

![Включение опции devtools](/img/blog/vscode-extension/enable-devtools.png)

#### С настройкой `REPL`

При клике в чекбокс `Enable REPL` и последующем запуске теста (в REPL режиме можно одновременно запустить только один тест) он будет запущен в специальном REPL режиме. Подробнее про этот режим можно прочитать <a href="/ru/docs/v8/command-line/#testplane-repl">тут</a>.

![Включение опции REPL](/img/blog/vscode-extension/enable-repl.png)

### Фильтрация тестов в сайдбаре панели тестирования

Чтобы в дереве отобразить только тесты в определенном браузере, необходимо ввести тег `@testplane:browser:your_browser_name` в инпут фильтрации. Чтобы появился саджест, можно просто написать `@browser`. Там же можно использовать несколько тегов.

![Фильтр по указанном браузеру](/img/blog/vscode-extension/filter_sidebar_by_browser.png)

Также в инпуте с фильтрацией можно использовать следующие значения:

-   строка с названием элемента дерева (директория/файл/сьют/тест/браузер);
-   тег `@doc` - для отображения тестов из активного файла в текстовом редакторе;
-   тег `@openedFiles` - для отображения тестов во всех открытых файлах в текстовом редакторе;
-   тег `@executed` - для отображения только выполняющихся тестов;
-   тег `@failed` - для отображения только упавших тестов.

### Перезапуск окружения Testplane

С помощью кнопки `Refresh Tests` в сайдбаре можно перезапустить Testplane. В этом случае перечитается конфиг и тесты. Пригодится в случае, если вы добавили новый тест в файл (вотчинг тестовых файлов пока не поддерживается) или произошла какая-то критическая ошибка.
Обновление дерева тестов выполняется автоматически при изменении конфига.

![Обновление дерева тестов](/img/blog/vscode-extension/refresh-tests.png)

### Требования

-   версия testplane должна быть 8.20.0 и старше (с версиями ниже запуск тестов работать не будет).

### Текущие ограничения

-   не поддержаны debug и continuous (auto-run) режимы;
-   нет вотчинга добавления/удаления тестов и файлов;
-   использование кастомных интерфейсов Mocha может приводить к некорректному отображению иконок с кнопкой play для запуска тестов из текстового редактора.

### Заключение

Данная функциональность предоставляет нашим пользователям новые возможности:

-   возможность запуска тестов прямо из IDE и просмотр результата выполнения;
-   возможность максимально быстро переключится в режим `devtools` и `repl`;
-   автоматически подхватывать изменения, внесенные в конфиг Testplane.

Устанавливайте расширение Testplane для VS Code и приходите с фидбеком. В случае обнаружения проблем приходите в [issue github](https://github.com/gemini-testing/testplane/issues) — мы вам обязательно поможем!

[vscode]: https://code.visualstudio.com/
[vscode-testplane-marketplace]: https://marketplace.visualstudio.com/items?itemName=gemini-testing.vscode-testplane
[mocha-bdd-interface]: https://mochajs.org/#bdd
