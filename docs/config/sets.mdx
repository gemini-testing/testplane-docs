# sets

## Обзор {#overview}

Вы можете использовать сеты _(sets)_, чтобы привязать набор тестов к определенным браузерам и запускать их сразу одной командой.

Например, это может быть удобно для запуска тестов по платформам: `desktop`, `touch-phone` и т. п. Также у вас может быть `common` сет, соответствующий общим тестам, которые вы будете запускать всегда во всех браузерах.

Набор тестов задается как массив путей к ним или к папкам с ними на файловой системе. Также вы можете задать пути, которые нужно игнорировать при поиске тестов, чтобы ускорить процесс чтения тестов Testplane.

Если сетов в конфиге не будет, или вы не укажете их при запуске Testplane (см. раздел «[Использование](#usage)»), то будут запущены все тесты из папки `testplane` во всех браузерах, которые были указаны в разделе [browsers][browsers] конфига Testplane.

## Настройка {#setup}

Раздел `sets` имеет следующий формат:

```javascript
module.exports = {
    sets: {
        <set-id>: {
            files: [
                'path-1',
                'some/folder/**/*.some-ext',
                // остальные пути к файлам с тестами...
            ],
            ignoreFiles: [
                'ignorePath-1',
                'some/ignore/folder/**/',
                // остальные пути, которые нужно игнорировать при поиске и чтении тестов...
            ],
            browsers: [
                'browser-1',
                'browser-2',
                // остальные браузеры, в которых нужно запускать тесты по указанным в files путям...
            ]
        },

        // настройки других сетов...
    },

    // другие настройки Testplane...
};
```

Где `<set-id>` — это имя сета, которое используется для его идентификации.

### Расшифровка параметров конфигурации {#setup_description}

<table>
<thead>
<tr><td>**Параметр**</td><td>**Тип**</td><td>**По&nbsp;умолчанию**</td><td>**Описание**</td></tr>
</thead>
<tbody>
<tr><td>files</td><td>Array или String</td><td>_N/A_</td><td>Список путей к файлам или папкам с тестами. В случае одного пути параметр можно задавать как строку. Также можно использовать [маски][fast-glob-patterns].</td></tr>
<tr><td>ignoreFiles</td><td>Array или String</td><td>`[ ]`</td><td>Список путей или [масок][fast-glob-patterns], которые нужно игнорировать при поиске файлов с тестами. Данный параметр позволяет ускорить чтение тестов Testplane.</td></tr>
<tr><td>browsers</td><td>Array</td><td>_все браузеры_</td><td>Список браузеров, в которых будут запускаться тесты. Можно указывать только браузеры, которые есть в разделе [browsers][browsers] конфига Testplane. По умолчанию все браузеры из раздела [browsers][browsers].</td></tr>

</tbody>
</table>

## Пример настройки {#setup_example}

```javascript
module.exports = {
    sets: {
        common: {
            // запускать тесты из папки tests/common во всех браузерах,
            // которые сконфигурированы в разделе browsers
            files: "tests/common/*.testplane.js",
        },

        desktop: {
            files: ["tests/desktop/*.testplane.js", "tests/common/*.testplane.js"],
            // исключить папки со скриншотами во время поиска файлов с тестами
            ignoreFiles: ["**/screens/**"],
            // запускать тесты в десктопных браузерах
            browsers: ["chrome", "firefox"],
        },
    },

    browsers: {
        chrome: {
            // настройки браузера chrome...
        },
        firefox: {
            // настройки браузера firefox...
        },
        iphone: {
            // настройки браузера iphone...
        },
    },

    // другие настройки Testplane...
};
```

## Использование {#usage}

Используйте CLI-опцию `--set`, чтобы указать сет при запуске тестов.

Пример как запустить тесты для desktop-платформы в случае конфигурации, приведенной [выше](#setup_example):

```bash
testplane --set desktop
```

Если в конфиге нет сетов, или они есть, но опция `--set` не была указана, и testplane не были переданы пути через CLI, то будут запущены все тесты из папки `testplane` во всех [браузерах][browsers].

[fast-glob-patterns]: https://github.com/mrmlnc/fast-glob#pattern-syntax
[browsers]: ../browsers
