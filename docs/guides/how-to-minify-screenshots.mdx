import Admonition from "@theme/Admonition";

# Как уменьшить вес скриншотов

## Введение {#preface}

Одна из ключевых функций testplane &mdash; это возможность тестировать верстку с помощью скриншотов. Для этого в тестах, при разных состояниях веб-страницы, можно снять скриншот и сравнить его с эталонным.

Пример такого сравнения:

![Сравнение скриншотов](/img/docs/guides/how-to-minify-screenshots.diff-in-screenshot.png)

<Admonition type="info" title="Для новичков">
**Откуда берутся эталонные скриншоты?**

Вы написали тест с использованием команды testplane _assertView_. Команда _assertView_ сравнивает актуальный скриншот с эталонным. Актуальный скриншот &mdash; это скриншот, который тест делает во время своего прогона. Он отражает текущее состояние вашей веб-страницы. При первом прогоне вашего теста эталонного скриншота у вас ещё нет. А значит команда _assertView_ упадет с сообщением, что эталонный скриншот не найден. При этом у вас будет актуальный скриншот. Если актуальный скриншот отражает то состояние вашей веб-страницы, которое вы ожидаете (считаете эталонным), то вам нужно _принять (accept)_ актуальный скриншот в качестве эталонного. Чтобы это сделать нужно запускать testplane с дополнительной опцией _--update-refs_. Или же воспользоваться режимом GUI, который предоставляет плагин _html-reporter_. С помощью него вы можете просматривать отчет о прогоне в GUI-режиме, убеждаться, что актуальные скриншоты именно такие, как вы ожидаете, и принимать их с помощью кнопки _Accept_.

</Admonition>

## Проблема {#problem}

Если в вашем проекте много тестов, в которых используется валидация верстки с помощью скриншотов, то значит, в вашем проекте будет много скриншотов. Иногда эти скриншоты &mdash; довольно большие и могут занимать много места на файловой системе.

Если в проекте идет активная разработка, то на каждый пулл-реквест будет формироваться свой отчет о прогоне тестов, в котором будут содержаться сотни (или тысячи) эталонных скриншотов. Чем больше вес скриншотов, тем больше будут весить ваши отчеты. А значит &mdash; дольше скачиваться, занимать больше места на диске и т. д.

## Решение: testplane-image-minifier {#solution}

Чтобы уменьшить место, которое скриншоты занимают на диске, подключите в своем проекте плагин [testplane-image-minifier][testplane-image-minifier]. Данный плагин поддерживает 8 степеней сжатия изображений без потерь.

Как подключить и настроить плагин читайте в [документации][testplane-image-minifier] плагина.

## Ключевые слова {#keywords}

-   testplane-image-minifier

[testplane-image-minifier]: ../plugins/testplane-image-minifier
